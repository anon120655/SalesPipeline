
<div class="container">
	<div class="row my-3">
		<div class="col-12">
			<table class="table table_list">
				<thead>
					<tr>
						<th scope="col">ชื่อ</th>
						<th scope="col">วันที่นำเข้า</th>
					</tr>
				</thead>
				<tbody>
					@if (formModel == null)
					{
						<tr class="text-center align-middle">
							<td colspan="100">
								<Spinner Class="my-2" Type="SpinnerType.Dots" Color="SpinnerColor.Secondary" />
							</td>
						</tr>
					}
					else if (formModel.Count == 0)
					{
						<tr class="text-center align-middle">
							<td colspan="100">
								<em>ไม่พบข้อมูล</em>
							</td>
						</tr>
					}
					else
					{
						foreach (var item in formModel)
						{
							<tr>
								<td>
									<a class="text-decoration-none" href="@item.Url" target="_blank">
										<i class="fa-regular fa-file-lines fa-xl me-2"></i>
										@item.FileName
									</a>
								</td>
								<td>
									@GeneralUtils.DateToThString(item.CreateDate)
								</td>
							</tr>
						}
					}
				</tbody>
			</table>
		</div>
	</div>
</div>

<Modal @ref="modalUploadFile"
	   Title="เอกสารเพิ่มเติม"
	   IsVerticallyCentered="true"
	   HeaderCssClass="headermodal_default">
	<BodyTemplate>
		@* <div class="row mb-4 text-center">
			<div class="col-12" style="min-height:7rem;">
				@if (!String.IsNullOrEmpty(formModel.ImgUrl) && formModel.ImgUrl.Contains("data:image"))
				{
					<img src="@($"{formModel.ImgUrl}")" width="250" @key=@(_inputFileId) />
				}
				else if (!String.IsNullOrEmpty(formModel.ImgUrlv))
				{
					<img src="@($"{formModel.ImgUrlv}")" width="250" @key=@(_inputFileId) />
				}
				else
				{
					<p>Image not found.</p>
				}
			</div>
		</div>
		<div class="row mb-4 text-center">
			<div class="col-12">
				@if (!bClearInput)
				{
					<InputFile accept=".png,.jpg,.jpeg" OnChange="OnUploadFileChanged" />
				}
			</div>
		</div>
		<div class="row my-3 text-center">
			<div class="d-flex justify-content-evenly align-items-center">
				<div class="p-2">
					<Button Class="mw_6r" Color="ButtonColor.Secondary" @onclick="OnHideUploadFile">ปิด</Button>
				</div>
				<div class="p-2">
					<Button Class="mw_6r" Color="ButtonColor.Primary" @onclick="Save">บันทึก</Button>
				</div>
			</div>
		</div> *@
	</BodyTemplate>
</Modal>

@code {
	[Parameter]
	public List<Sale_Document_UploadCustom>? formModel { get; set; }

	Modal modalUploadFile = default!;
	private bool bClearInput = false;
	//ใส่กรณี clear file แล้ว input ไม่ update
	string _inputFileId = Guid.NewGuid().ToString();
}
