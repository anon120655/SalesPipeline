@page "/changepassword"

@layout MainLayoutBlank

<section class="h-100 gradient-form" style="background-color: #e5eef6;">
	<div class="container py-5 h-100">
		<div class="row d-flex justify-content-center align-items-center h-100">
			<div class="col-xl-5">
				<div class="card rounded-3">
					<div class="row g-0">
						<div class="col-lg-12">
							<div class="card-body p-md-5 mx-md-4">
								<div class="text-center fw-bold">
									<NavLink href="/">
										<img src="/image/icon/key_lock.png" width="30" />
									</NavLink>
									<h4 class="mt-5 pb-3">Change Password</h4>
									<EditForm Model="@changePassword" OnValidSubmit="SubmitChange" class="bg-white p-2">
										<DataAnnotationsValidator />
										<div class="form-outline mb-4 text-start">
											<label class="form-label text-muted">Old Password</label>
											<input type="text" @bind="@changePassword.OldPassword" class="form-control" placeholder="" />
											<ValidationMessage For="@(() => changePassword.OldPassword)" />
										</div>
										<div class="form-outline mb-4 text-start">
											<label class="form-label text-muted">New Password</label>
											<input type="password" @bind="@changePassword.NewPassword" class="form-control" />
											<ValidationMessage For="@(() => changePassword.NewPassword)" />
										</div>
										<div class="form-outline mb-4 text-start">
											<label class="form-label text-muted">Confirm Password</label>
											<input type="password" @bind="@changePassword.ConfirmPassword" class="form-control" />
											<ValidationMessage For="@(() => changePassword.ConfirmPassword)" />
										</div>
										<div class="text-center pt-1 mb-5 pb-1">
											<Button Color="ButtonColor.Info"
													Type="ButtonType.Submit"
													Disabled="@isLoading" Class="btn-block fa-lg gradient-custom-2 mb-3 w-100 text-white">
												@if (isLoading)
												{
													<span><i class="fa-solid fa-circle-notch fa-spin text-white fa-lg"></i></span>
												}
												Change Password
											</Button>
										</div>
										@if (_errorMessage is not null)
										{
											<div class="alert alert-danger alert-dismissible" role="alert">
												<p class="text-red">@_errorMessage</p>
											</div>
										}
									</EditForm>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>


